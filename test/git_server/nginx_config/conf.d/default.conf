upstream docker-server {
    server server:3000;
}

server {
    listen       80;
    server_name  localhost;

    location / {
        # uncomment the line below to introduce a 5 second delay to each request
        # access_by_lua_block { ngx.sleep(5) }
        proxy_pass http://docker-server;
    }
}

# haven't found a way to make this require your password when pulling/pushing
# but I've got it lagging on requests which is good for testing slow internet
# speeds
server {
    listen       443 ssl;
    server_name  localhost;
    ssl on;
    ssl_certificate     /etc/nginx/cert.pem;
    ssl_certificate_key /etc/nginx/key.pem;

    location / {
        # access_by_lua_block { ngx.sleep(5) }
        proxy_pass http://docker-server;
    }
}
